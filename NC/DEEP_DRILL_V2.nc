%
O7981(DEEP DRILL V2)

( G65 P7981 Z-7.88 D-.4 S6000 F60. )
( G65 P7981 Z-7.88 E-7.75 D-.4 S6000 F60. )
( IF CALLED WITH NO "E" THEN THERE WILL BE NO SLOWDOWN NEAR END OF HOLE )
( Z - FULL DRILLING DEPTH )
( E - Z POINT OF BREAK THROUGH [FEED SLOWS] )
( D - DEPTH OF PILOT [DO NOT SET DEEPER THAN PILOT DEPTH!] )
( S - DRILLING RPMS )
( F - FEEDRATE OF DRILLING )

( V1 - INITIAL WORKING VERSION )
( V2 - ADDING CHECK FOR PILOT DEPTH TO BE NEGATIVE )

#18=#5003 ( SAVING Z AT CALLED POS )
#100=300 ( SAFE RPMS FOR ENTERING PILOT )

( CHECK FOR MANDATORY PARAMETERS )
IF[#26 EQ #0] GOTO942
IF[#7 EQ #0] GOTO943
IF[#19 EQ #0] GOTO944
IF[#9 EQ #0] GOTO945
IF[#7 GT 0] GOTO946

S#100 M4
G1 Z#7 F20.
M50
S#19 M3
G4 X2.
IF [#8 EQ #0] GOTO100
G1 Z[#8 + .25] F#9
G1 Z#26 F[#9 * 0.33 ]
N100 G1 Z#26 F#9
M5
M9
G0 Z#18
M99
%

N942#3000=2(Z DEPTH MUST BE GIVEN [Z])
N943#3000=3(PILOT DEPTH MUST BE GIVEN [D])
N944#3000=4(SPINDLE SPEED MUST BE GIVEN [S])
N945#3000=5(FEEDRATE MUST BE GIVEN [F])
N946#3000=6(PILOT DEPTH MUST BE NEGATIVE [-D])
M99
%
