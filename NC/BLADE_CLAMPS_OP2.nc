%
O00902 (Macro: Blade Clamps Op2)

(X IS 2ND DOWEL HOLE FROM RIGHT)
(DOWEL LOCATION IS X -1.0 FROM RIGHT)
(Y BACK INSIDE EDGE OF CLAMP)
(Z IS TOP OF PART)

(PROBE OFFSETS FOR G154 P2)

(~~~~~~~~~ SETUP ~~~~~~~~~)
(FIRST THRU HOLE X LOC:)
#850=.875
(FIRST THRU HOLE Y LOC:)
#851=.790
(FLAT BOTTOM HOLE Y LOC:)
#855=0.730
(SPREAD DISTANCE:)
#852=5.9371
(FINISH LENGTH:)
#853=43.310

(ENGRAVING TEXT:)
( SEQUENCE SEARCH TO LINE N47)
( CHANGE LETTERING IN COMMENT)

(LIMIT TO NUM OF BLADE CLAMPS)
( #865= 0 FOR AUTOMATIC)
#865=2

(USE BLOCK DELETE TO SKIP G10 LINE)

(~~~~~~~~~ TOOLS ~~~~~~~~~)
(T5: 3/4" x 82 DEG CSINK)
(T21: 1/4" CARBIDE 3FLT ENDMILL)
(T28: 1/16" CARBIDE BALL ENGRAVER)






(~~~~~~~~~ BEGIN ~~~~~~~~~)
G00 G17 G20 G40 G49 G80 G90
M97 P1000 (CALCULATIONS)
T21 M06 (1/4" CARBIDE 3FLT ENDMILL)
M01 (1/4" CARBIDE 3FLT ENDMILL)
G00 G90 G154 P2 X-[ #850 + 1.0 ] Y-#855
S3200 M03
G43 H21 Z1. T5 M08
(INIT COUNTER:)
#600=1
M97 P2100
G00 Z1. M09
M05
M09
G91 G28 Z0.
M01

G00 G17 G20 G40 G49 G80 G90
M97 P1000 (CALCULATIONS)
T5 M06 (3/4" x 82 DEG CSINK)
M01 (3/4" x 82 DEG CSINK)
G52 X#861
G00 G90 G154 P2 X#850 Y-#851
S2000 M03
G43 H05 Z1. T28 M08
(INIT COUNTER:)
#600=1
M97 P3131
M05
M09
G91 G28 Z0.
M01

G00 G17 G20 G40 G49 G80 G90
M97 P1000 (CALCULATIONS)
T28 M06 (1/16" CARBIDE BALL ENGRAVER)
M01 (1/16" CARBIDE BALL ENGRAVER)
G52 X0. Y0.
G00 G90 G154 P2 X-2.25 Y-#855
S7000 M03
G43 H28 Z1. T21 M08
(INIT COUNTER:)
#600=1
M97 P2800
G00 Z1. M09
M05
G91 G28 Z0.
M01
G00 G90 G53 X-60. Y0.
T21 M06
M30


(~~~~~~~~~ SUBROUTINES ~~~~~~~~~)


(CBORE WHILE LOOP SUB)
N2100
WHILE [ #600 LE #860 ] DO1
G00 G90 G154 P2 X-[#850 + 1.0] Y-#855
G73 G99 R0.1 Z-0.19 Q0.05 F15.
M97 P102
M97 P101 L[ #856 - 1 ]
G80
M97 P1001 (G52 AND INCREMENT)
END1
M99


(CSINK DEBURR LOOP SUB)
N3131
WHILE [ #600 LE #860 ] DO1
G00 G90 G154 P2 X#850 Y-#851
G81 G99 R0.1 Z-.142 Q0.05 F20.
M97 P201 L#856
G80
M97 P2001 (G52 AND INCREMENT)
END1
M99


(ENGRAVING LOOP SUB)
N2800
WHILE [ #600 LE #860 ] DO1
G00 G90 G154 P2 X-2.25 Y-#855
N47 G47 P0 I180. J0.14 R0.03 Z-0.003 F20. (HB480-12.9M)
M01
M97 P1001 (G52 AND INCREMENT)
END1
M99


N1000 (CALCULATIONS)
M01
G103 P1
(NUMBER OF SPACES)
#856= FIX[[ #853 / #852 ]]

(PIN DISTANCE SET)
IF [ #853 GT 4.75 ] THEN #605=10.
IF [ #853 GT 9.75 ] THEN #605=15.
IF [ #853 GT 14.75 ] THEN #605=20.
IF [ #853 GT 19.75 ] THEN #605=25.
IF [ #853 GT 24.75 ] THEN #605=30.
IF [ #853 GT 24.75 ] THEN #605=30.
IF [ #853 GT 29.75 ] THEN #605=35.
IF [ #853 GT 34.75 ] THEN #605=40.
IF [ #853 GT 39.75 ] THEN #605=45.
IF [ #853 GT 44.75 ] THEN #605=50.
IF [ #853 GT 49.75 ] THEN #605=55.
IF [ #853 GT 54.75 ] THEN #605=60.

(TOTAL NUM OF BLADES:)
IF [ #865 EQ 0 ] THEN #860= FIX[ 106 / #853 ]

IF [ #865 NE 0 ] THEN #860= FIX[ #865 ]

(FURTHEST EDGE:)
#861= -[[[ #860 - 1 ] * #605 ] + #853 ]
M99


(LEFT)
N1001 (G52 AND INCREMENT)
G52 X-[ #605 * #600 ]
(COUNTER:)
#600= [ #600 + 1 ]
M99


(RIGHT)
N2001 (G52 AND INCREMENT)
G52 X [ #861 + [ #605 * #600 ] ]
(COUNTER:)
#600= [ #600 + 1 ]
M99


(NEGATIVE CBORE SUB)
N101 G91 X-2.
N102 G91 X-[ #852 - 2.0 ]
M99


(POSITIVE CSINK SUB)
N201 G91 X1. Y[ #851 - #855 ]
N202 G91 X[ #852 - 2.0 ]
N203 G91 X1. Y-[ #851 - #855 ]
M99



N9999



(~~~~~~~~~ CHANGELOG ~~~~~~~~~)
(11.14.12 KKH - BUG FIXES)
( CONVERTED WHILE LOOPS INTO SUBS)
( FIXED RANGE ERROR, REORDERED PIN SET)
( FIXED CSINK CYCLE)

(11.19.12 KKH - MULTI BLADE FIX)
WHILE [ [ #860 * #605 ] GE 90 ] GOTO3
#860= [ #860 - 1 ]
END3

(6.20.13 KKH - ADDED B.C. LIMIT)
(12.6.13 KKH - MODIFIED G10 LINE)
%
