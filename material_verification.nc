%
O7999(MATERIAL_VERIFICATION)
(DESCRIPTION=MATERIAL_VERIFICATION)
(PROGRAMMER=SHAGGY)
(PROGRAM-VERSION=21)
(RUN-TIME=0-00-00)
(CUTTING-TIME=0-00-00)
(SECURITY-CLASS=2)
(PROGRAM-TYPE=0)
(PROGRAM-CLASS=1)
(DOWNLOAD-TARGET=0)
(DATE - DEC. 5 2016)
(TIME - 8:41 AM)
(NC FILE - C:\H+405 PROGRAM VAULT\MISC\PROBING\MATERIAL_VERIFICATION.NC)

( G65 P7999 X2.5 Y-1. U.3 V-.3 A.05 B.03 C)
( Q - ERROR ALLOWANCE )
( U - X SHIFT AMOUNT )
( V - Y SHIFT AMOUNT )
( X - X LOC. OF CORNER )
( Y - Y LOC. OF CORNER )

#600=-.2 ( HARDCODING Z DEPTH FOR X,Y PROBING )

( USE PASSED TOLERANCE IF GIVEN )
( OTHERWISE DEFAULT TO 0.05" )
(IF[#17 NE #0] GOTO10)
(#17=.05)
(N10 #17=ABS[#17])

( USE PASSED X DATUM TOLERANCE IF GIVEN )
( OTHERWISE DEFAULT TO 0.05" )
IF[#1 NE #0] GOTO20
#1=.05
N20 #1=ABS[#1]

( USE PASSED Y DATUM TOLERANCE IF GIVEN )
( OTHERWISE DEFAULT TO 0.05" )
IF[#2 NE #0] GOTO30
#2=.05
N30 #2=ABS[#2]

( USE PASSED Z MEASURE TOLERANCE IF GIVEN )
( OTHERWISE DEFAULT TO 0.05" )
IF[#3 NE #0] GOTO40
#3=.05
N40 #3=ABS[#3]

( USE PASSED EXTRA Z STOCK IF GIVEN )
( OTHERWISE DEFAULT TO 0.05" )
IF[#26 NE #0] GOTO50
#26=.05
N50 #26=ABS[#26]

( TURN ON PROBE )
( PROBE ON )
G65 P9832

( MOVE CLOSER TO PART )
( PROTECTED POSITIONING )
G65 P9810 Z2. M1.
IF[#148 NE 0] GOTO911 ( PATH OBSTRUCTION )

( MOVE X,Y SHIFT AMOUNT FROM CURRENT POS. )
( IN OPPOSITE DIRECTION TO POSITION OVER )
( MATERIAL FOR Z CHECK )
( PROTECTED POSITIONING )
G65 P9810 X[#24 + [-#21]] Y[#25 + [-#22]]

( TRY AND TOUCH SURFACE )
( IF NO TOUCH, JUMP TO Tnnn )
G229 Z-2.1 T910 ( DIDN'T TOUCH ANYTHING, SHIT! )

( SINGLE SURFACE MEASURE )
G65 P9811 Z0. Q1.05

( CHECK IF MEASURED Z SURFACE IS MORE THAN ERROR AMOUNT )
IF[#142 GT #3] GOTO914

( PROTECTED POSITIONING )
G65 P9810 X[#24 + #21] M1.
IF[#148 NE 0] GOTO911 ( PATH OBSTRUCTION )

( PROTECTED POSITIONING )
G65 P9810 Z#26 M1.
IF[#148 NE 0] GOTO911 ( PATH OBSTRUCTION )

( SINGLE SURFACE MEASURE )
G65 P9811 X#24

(CHECK IF MEASURED X SURFACE GT THAN ERROR AMOUNT )
IF[#140 GT #1] GOTO912

( MOVE ABOVE PART )
( PROTECTED POSITIONING )
G65 P9810 Z.3

( MOVE BACK )
( PROTECTED POSITIONING )
G65 P9810 X[#24 + [-#21]] Y[#25 + #22] M1.
IF[#148 NE 0] GOTO911 ( PATH OBSTRUCTION )

( MOVE Z DOWN SHIFT AMOUNT FROM WORK OFFSET Z0 )
( PROTECTED POSITIONING )
G65 P9810 Z#26 M1.
IF[#148 NE 0] GOTO911 ( PATH OBSTRUCTION )

( SINGLE SURFACE MEASURE )
G65 P9811 Y#25

( MEASURED Y SURFACE GT THAN ERROR AMOUNT )
IF[#141 GT #2] GOTO913

( MOVE ABOVE PART )
( PROTECTED POSITIONING )
G65 P9810 Z1.

( PROBE OFF )
G65 P9833
M107
M01 ( CORRECT MATERIAL, MAKE SOME CHIPS! )
M99


(---------------------------)
(  CHECKS FAILED SOMEWHERE  ])
(---------------------------)
N910
M01 ( MATERIAL NOT FOUND! )
GOTO3000

N911
M01 ( THERE SHOULD BE... NO TOUCHING! )
GOTO3000

N912
M01 ( OUT OF TOLERANCE [X] )
GOTO3000

N913
M01 ( OUT OF TOLERANCE [Y] )
GOTO3000

N914
M01 ( OUT OF TOLERANCE [Z] )
GOTO3000


N3000
G91 Z2. F50.
( PROBE OFF )
G65 P9833
M107
M30
%
